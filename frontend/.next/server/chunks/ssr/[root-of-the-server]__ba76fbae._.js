module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},53250,a=>{"use strict";async function b(a,c={}){let d=`http://127.0.0.1:8000/api${a}`,e={headers:{"Content-Type":"application/json",...c.headers},...c};try{let a=await fetch(d,e);if(!a.ok)throw Error(`API request failed: ${a.status} ${a.statusText}`);return await a.json()}catch(a){throw console.error("API request error:",a),a}}a.s(["api",()=>b])},41997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},64791,a=>{"use strict";let b=(0,a.i(70106).default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);a.s(["Video",()=>b],64791)},43657,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87532);let e=(0,a.i(70106).default)("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);var f=a.i(210),g=a.i(64791),h=a.i(38246),i=a.i(50944),j=a.i(53250);function k(){let a=(0,i.useParams)().buildingId,[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!0);(0,c.useEffect)(()=>{let b=async()=>{try{let b=await j.api.getBuilding(a);p(b);let c=await j.api.getRoomsByBuilding(a);Array.isArray(c)?n(c):n([])}catch(a){console.error("Failed to fetch building or room:",a),n([])}finally{r(!1)}};if(a){let a=setTimeout(()=>{b()},50);return()=>clearTimeout(a)}},[a]);let s=m.filter(a=>a.name&&a.name.toLowerCase().includes(k.toLowerCase())).reduce((a,b)=>{let c=a.find(a=>a.name===b.name);return c?(b.cctvs&&Array.isArray(b.cctvs)&&(c.cctvs=c.cctvs||[],c.cctvs=[...c.cctvs,...b.cctvs]),c.cctvCount=c.cctvs&&c.cctvs.length||0):a.push({...b,cctvCount:b.cctvs&&b.cctvs.length||0}),a},[]);return(0,b.jsxs)("main",{className:"bg-gradient-to-br from-blue-950 via-slate-900 to-blue-900 py-8 min-h-[calc(100vh-140px)]",children:[(0,b.jsx)("div",{className:"pt-4 pb-6 px-4",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,b.jsx)(h.default,{href:"/playlist",className:"text-blue-300 hover:text-white transition p-2",children:(0,b.jsx)(f.ArrowLeft,{size:20,className:"md:w-6 md:h-6"})}),(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-white truncate text-center flex-grow mx-4",children:o?o.name:"Playlist"}),(0,b.jsx)("div",{className:"w-8 md:w-6"})," "]})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 pb-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-3 text-white",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"Search room...",value:k,onChange:a=>l(a.target.value),className:"w-full pl-10 pr-4 py-2 md:py-3 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl text-white placeholder-white/50 font-semibold focus:outline-none focus:border-white/40 transition"})]})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 pb-8",children:q?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-3"}),(0,b.jsx)("p",{className:"text-white font-semibold",children:"Loading room..."})]}):0===s.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(e,{className:"w-12 h-12 text-white mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-white font-semibold",children:"No room available"}),(0,b.jsx)("p",{className:"text-white text-sm mt-2",children:"Room will appear once added in admin panel"})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:s.map(c=>(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-4 md:p-6 hover:bg-white/15 transition-all duration-300",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)(e,{className:"w-5 h-5 md:w-6 md:h-6 text-green-400"}),(0,b.jsx)("h3",{className:"text-lg md:text-xl font-semibold text-white truncate",children:c.name||"Unnamed Room"})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[c.cctvs&&Array.isArray(c.cctvs)&&c.cctvs.slice(0,3).map(a=>(0,b.jsx)("div",{className:"flex items-center justify-between bg-black/20 rounded p-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Video,{className:"w-4 h-4 text-red-400"}),(0,b.jsx)("span",{className:"text-white text-sm truncate",children:a.name||"Unnamed CCTV"})]})},a.id)),c.cctvs&&Array.isArray(c.cctvs)&&c.cctvs.length>3&&(0,b.jsxs)("div",{className:"text-xs text-white text-center",children:["+",c.cctvs.length-3," more CCTV"]}),(!c.cctvs||!Array.isArray(c.cctvs)||0===c.cctvs.length)&&(0,b.jsx)("div",{className:"text-center py-1",children:(0,b.jsx)("p",{className:"text-white text-sm",children:"No CCTV available"})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm text-white",children:[c.cctvs&&Array.isArray(c.cctvs)?c.cctvs.length:0," CCTV"]}),(0,b.jsx)(h.default,{href:`/playlist/${a}/${c.id}`,children:(0,b.jsx)("button",{className:"text-xs md:text-sm bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-lg transition",children:"View CCTV"})})]})]},c.id))})})]})}a.s(["default",()=>k],43657)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ba76fbae._.js.map